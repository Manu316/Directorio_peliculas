{% extends "movies/base.html" %}

{% block title %}Mi Colección{% endblock %}

{% block content %}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="text-white">Mi Colección</h1> 
        <a href="{% url 'search_movie' %}" class="btn btn-primary">Añadir Película</a>
    </div>

    {% if movies %}
        <div class="row row-cols-2 row-cols-md-4 row-cols-lg-5 g-3 g-lg-4"> 
            {% for movie in movies %}
                <div class="col">
                    <a href="{% url 'detail_movie' movie.pk %}" class="text-decoration-none">
                        <div class="card h-100 shadow-sm">
                            {% with poster_url='https://image.tmdb.org/t/p/w500'|add:movie.poster_path %}
                                <img src="{{ poster_url }}" class="card-img-top rounded" alt="{{ movie.title }}" style="height: auto; width: 100%; object-fit: cover;">
                            {% endwith %}
                            
                            <div class="card-body p-2">
                                <h5 class="card-title text-truncate mb-1">{{ movie.title }}</h5> 
                                
                                {% if movie.watched %}
                                    <span class="badge bg-danger">VISTA</span>
                                {% else %}
                                    <span class="badge bg-secondary">PENDIENTE</span>
                                {% endif %}
                                
                            </div>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        {% endif %}
{% endblock content %}